task runMethod(type: Exec, group: 'codebag') {

    Task install = installDebug()
    dependsOn(install)

    doFirst {
        def classMethodName = System.getProperty("class_method_name")
        if (classMethodName == null) {
            classMethodName = "com.javalive09.demos.AA\$show"
        }
        println "classMethodName = " + classMethodName
        int length = classMethodName.length()
        int split = classMethodName.indexOf('$');
        def className = classMethodName.substring(0, split)
        def methodName = classMethodName.substring(split + 1, length)
        println "className = " + className
        println "methodName = " + methodName
        println "runMethod>>>>>>>>>>>>>>>>>>>>>>>>> "
        commandLine 'adb', 'root'
        commandLine 'adb', 'remount'
        commandLine "adb", "shell", "am", "start", "-a", "com.javalive09.ACTION_CODEBAG", "--es", "className",
                "" + className, "--es", "methodName", "" + methodName
    }
}

def installDebug() {
    String taskName = "installDebugForMethod"
    return tasks.create(taskName) {
        println "installDebug>>>>>>>>>>>>>>>>>>>>>>>>> "
        dependsOn ":app:installDebug"
    }
}
